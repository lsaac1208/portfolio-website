(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3401],{128:function(e,t,r){Promise.resolve().then(r.bind(r,9605))},9605:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(7437),s=r(2265),i=r(6013),l=r(495),a=r(3102),c=r(4693),o=r(7440),d=r(3274),u=r(4817),f=r(4241),m=r(4086),x=r(9832),h=r(1077),p=r(7390),v=r(5591);let g={pending:{label:"待处理",variant:"default"},contacted:{label:"已联系",variant:"secondary"},quoted:{label:"已报价",variant:"outline"},closed:{label:"已关闭",variant:"destructive"}};function y(){var e;let[t,r]=(0,s.useState)(""),[y,b]=(0,s.useState)([]),[j,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(!0),[Z,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{_()},[]);let _=async()=>{try{let e=await v.ot.list();b(e)}catch(e){(0,v.x2)("获取询价列表失败")}finally{k(!1)}},E=y.filter(e=>e.client_name.toLowerCase().includes(t.toLowerCase())||e.client_email.toLowerCase().includes(t.toLowerCase())||e.description&&e.description.toLowerCase().includes(t.toLowerCase())),S=async(e,t)=>{C(e);try{await v.ot.update(e,{status:t}),b(y.map(r=>r.id===e?{...r,status:t}:r)),N(j&&j.id===e?{...j,status:t}:j),(0,v.s$)("状态已更新")}catch(e){(0,v.x2)("更新失败")}finally{C(null)}};return w?(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"询价管理"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-1",children:"加载中..."})]}),(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-primary"})})]}):(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"询价管理"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-1",children:"管理客户询价和订单"})]}),(0,n.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,n.jsx)(a.I,{placeholder:"搜索询价...",value:t,onChange:e=>r(e.target.value),className:"pl-10 input-glow"})]}),(0,n.jsx)(i.Zb,{className:"gradient-border",children:(0,n.jsx)(i.aY,{className:"p-0",children:(0,n.jsx)("div",{className:"divide-y divide-border max-h-[600px] overflow-y-auto",children:E.map(e=>{var t,r,s;return(0,n.jsx)("div",{className:"p-4 cursor-pointer hover:bg-muted/50 transition-colors ".concat((null==j?void 0:j.id)===e.id?"bg-primary/5":""),onClick:()=>N(e),children:(0,n.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium",children:e.client_name}),(0,n.jsx)(c.C,{variant:(null===(t=g[e.status])||void 0===t?void 0:t.variant)||"secondary",children:(null===(r=g[e.status])||void 0===r?void 0:r.label)||e.status})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-1",children:e.description}),(0,n.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(f.Z,{className:"h-3 w-3"}),(0,o.p6)(e.created_at)]}),(0,n.jsx)("span",{children:(null===(s=e.service)||void 0===s?void 0:s.name)||"未指定"}),(0,n.jsx)("span",{children:e.budget||"未指定"})]})]})})},e.id)})})})}),0===E.length&&(0,n.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"没有找到相关询价"})]}),(0,n.jsx)("div",{className:"space-y-4",children:j?(0,n.jsxs)(i.Zb,{className:"gradient-border",children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"询价详情"}),(0,n.jsxs)(i.SZ,{children:["ID: #",j.id]})]}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"客户姓名"}),(0,n.jsx)("p",{className:"font-medium",children:j.client_name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"联系方式"}),(0,n.jsxs)("div",{className:"space-y-1 mt-1",children:[(0,n.jsxs)("p",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"}),j.client_email]}),j.client_phone&&(0,n.jsxs)("p",{className:"flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"}),j.client_phone]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"服务类型"}),(0,n.jsx)("p",{className:"font-medium",children:(null===(e=j.service)||void 0===e?void 0:e.name)||"未指定"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"预算范围"}),(0,n.jsxs)("p",{className:"flex items-center gap-1 font-medium",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),j.budget||"未指定"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"需求描述"}),(0,n.jsx)("p",{className:"mt-1 text-sm",children:j.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground",children:"提交时间"}),(0,n.jsx)("p",{className:"mt-1",children:(0,o.p6)(j.created_at)})]}),(0,n.jsxs)("div",{className:"pt-4 border-t border-border",children:[(0,n.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"更新状态"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(g).map(e=>{let[t,r]=e;return(0,n.jsxs)(l.z,{variant:j.status===t?"default":"outline",size:"sm",onClick:()=>S(j.id,t),disabled:Z===j.id,children:[Z===j.id?(0,n.jsx)(d.Z,{className:"h-4 w-4 animate-spin mr-1"}):null,r.label]},t)})})]})]})]}):(0,n.jsx)(i.Zb,{className:"gradient-border",children:(0,n.jsxs)(i.aY,{className:"p-8 text-center text-muted-foreground",children:[(0,n.jsx)(p.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,n.jsx)("p",{children:"选择一个询价查看详情"})]})})})]})]})}},4693:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var n=r(7437);r(2265);var s=r(3027),i=r(7440);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)(l({variant:r}),t),...s})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(7437),s=r(2265),i=r(1538),l=r(3027),a=r(7440);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 neon-glow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,n.jsx)(u,{className:(0,a.cn)(c({variant:s,size:l,className:r})),ref:t,...d})});o.displayName="Button"},3102:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(7437),s=r(2265),i=r(7440);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-input px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-300",r),ref:t,...l})});l.displayName="Input"},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(2265);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...f}=e;return(0,n.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:c?24*Number(a)/Number(s):a,className:i("lucide",o),...f},[...u.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,n.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,n.createElement)(a,{ref:l,iconNode:t,className:i("lucide-".concat(s(e)),c),...o})});return r.displayName="".concat(e),r}},4241:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1077:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4086:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7390:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9832:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(8030).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1584:function(e,t,r){"use strict";function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,s=e.map(e=>{let s=n(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():n(e[t],null)}}}}r.d(t,{F:function(){return s}}),r(2265)},1538:function(e,t,r){"use strict";r.d(t,{g7:function(){return l}});var n=r(2265),s=r(1584),i=r(7437),l=function(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...i}=e;if(n.isValidElement(r)){let e,l;let a=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,c=function(e,t){let r={...t};for(let n in t){let s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...e)=>{let t=i(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...i}:"className"===n&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(c.ref=t?(0,s.F)(t,a):a),n.cloneElement(r,c)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:s,...l}=e,a=n.Children.toArray(s),o=a.find(c);if(o){let e=o.props.children,s=a.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...l,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,i.jsx)(t,{...l,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}("Slot"),a=Symbol("radix.slottable");function c(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===a}},3027:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var n=r(4839);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=n.W,l=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:a}=t,c=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],n=null==a?void 0:a[e];if(null===t)return null;let i=s(t)||s(n);return l[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return i(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...o}[t]):({...a,...o})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[4868,7,2971,7023,1744],function(){return e(e.s=128)}),_N_E=e.O()}]);