(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{6013:function(e,t,n){"use strict";n.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return u},eW:function(){return f},ll:function(){return s}});var r=n(7437),o=n(2265),a=n(7440);let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm glass-card card-hover",n),...o})});i.displayName="Card";let c=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...o})});c.displayName="CardHeader";let s=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...o})});s.displayName="CardTitle";let l=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...o})});l.displayName="CardDescription";let u=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...o})});u.displayName="CardContent";let f=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...o})});f.displayName="CardFooter"},5591:function(e,t,n){"use strict";n.d(t,{AC:function(){return T},F$:function(){return S},Xo:function(){return b},ZM:function(){return d},eJ:function(){return E},g8:function(){return N},iJ:function(){return y},mJ:function(){return v},nJ:function(){return w},ot:function(){return k},s$:function(){return p},x2:function(){return m}});let r=n(357).env.NEXT_PUBLIC_API_URL||"http://localhost:8000",o="user",a="token",i="refreshToken",c=!1,s=[],l=e=>{s.push(e)},u=e=>{s.forEach(t=>t(e)),s=[]},f={getToken:()=>localStorage.getItem(a),setToken:e=>localStorage.setItem(a,e),removeToken:()=>localStorage.removeItem(a),getRefreshToken:()=>localStorage.getItem(i),setRefreshToken:e=>localStorage.setItem(i,e),removeRefreshToken:()=>localStorage.removeItem(i),clearAll:()=>{f.removeToken(),f.removeRefreshToken(),localStorage.removeItem(o)}},d={getUser:()=>{let e=localStorage.getItem(o);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},setUser:e=>localStorage.setItem(o,JSON.stringify(e)),removeUser:()=>localStorage.removeItem(o)};function m(e){alert(e),console.error(e)}function p(e){{let t=document.createElement("div");t.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50 animate-fade-in",t.textContent=e,document.body.appendChild(t),setTimeout(()=>t.remove(),3e3)}}async function h(){let e=f.getRefreshToken();if(!e)return!1;if(c)return new Promise(e=>{let t=setTimeout(()=>{s=s.filter(e=>e!==u),e(!1)},1e4);l(n=>{clearTimeout(t),e(!0)})});c=!0;try{let t=new AbortController,n=setTimeout(()=>t.abort(),1e4),o=await fetch("".concat(r,"/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e}),signal:t.signal});if(clearTimeout(n),!o.ok)return f.clearAll(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("auth:logout"))},100),!1;{let e=await o.json();return f.setToken(e.access_token),u(e.access_token),!0}}catch(e){return!1}finally{c=!1}}async function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o="".concat(r).concat(e),a=new AbortController,i=setTimeout(()=>a.abort(),15e3);try{let r=await fetch(o,{...t,headers:{"Content-Type":"application/json",...function(){let e=f.getToken();return e?{Authorization:"Bearer ".concat(e)}:{}}(),...t.headers},signal:a.signal});if(clearTimeout(i),401===r.status&&n>0&&await h())return g(e,t,n-1);if(401===r.status&&0===n)throw f.clearAll(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("auth:logout"))},100),Error("登录已过期，请重新登录");if(!r.ok){let e=await r.json().catch(()=>({detail:"请求失败"})),t=e.detail||e.message||"请求失败";throw m(t),Error(t)}let c=r.headers.get("content-type");if(c&&c.includes("application/json"))return r.json();return{}}catch(e){if(clearTimeout(i),e instanceof Error&&"AbortError"===e.name)throw Error("请求超时，请稍后重试");throw e}}let y={login:async(e,t)=>{let n=await g("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return f.setToken(n.access_token),n.refresh_token&&f.setRefreshToken(n.refresh_token),n},register:async(e,t,n)=>{let r=await g("/api/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:n})});return f.setToken(r.access_token),r.refresh_token&&f.setRefreshToken(r.refresh_token),r},logout:()=>{f.clearAll()},getCurrentUser:async()=>g("/api/auth/me"),refreshToken:async()=>{let e=f.getRefreshToken();if(!e)throw Error("No refresh token available");let t=await g("/api/auth/refresh",{method:"POST",body:JSON.stringify({refresh_token:e})});return f.setToken(t.access_token),t},isAuthenticated:()=>!!f.getToken(),isAdmin:()=>{let e=d.getUser();return(null==e?void 0:e.role)==="ADMIN"}},T={list:async e=>{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",String(e.page)),(null==e?void 0:e.limit)&&t.set("limit",String(e.limit)),(null==e?void 0:e.search)&&t.set("search",e.search);let n=t.toString()?"?".concat(t.toString()):"";return g("/api/blog/posts".concat(n))},get:async e=>g("/api/blog/posts/".concat(e)),create:async e=>g("/api/blog/posts",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>g("/api/blog/posts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>g("/api/blog/posts/".concat(e),{method:"DELETE"})},v={listTopics:async e=>{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",String(e.page)),(null==e?void 0:e.limit)&&t.set("limit",String(e.limit));let n=t.toString()?"?".concat(t.toString()):"";return g("/api/forum/topics".concat(n))},getTopic:async e=>g("/api/forum/topics/".concat(e)),createTopic:async e=>g("/api/forum/topics",{method:"POST",body:JSON.stringify(e)}),getComments:async e=>g("/api/forum/topics/".concat(e,"/comments")),addComment:async(e,t)=>g("/api/forum/topics/".concat(e,"/comments"),{method:"POST",body:JSON.stringify(t)}),adminListTopics:async e=>{let t=new URLSearchParams;e&&t.set("search",e);let n=t.toString()?"?".concat(t.toString()):"";return g("/api/forum/admin/topics".concat(n))},adminDeleteTopic:async e=>g("/api/forum/admin/topics/".concat(e),{method:"DELETE"}),adminListComments:async()=>g("/api/forum/admin/comments"),adminDeleteComment:async e=>g("/api/forum/admin/comments/".concat(e),{method:"DELETE"})},S={list:async e=>{let t=new URLSearchParams;(null==e?void 0:e.featured)!==void 0&&t.set("featured",String(e.featured));let n=t.toString()?"?".concat(t.toString()):"";return g("/api/projects".concat(n))},get:async e=>g("/api/projects/".concat(e)),create:async e=>g("/api/projects",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>g("/api/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>g("/api/projects/".concat(e),{method:"DELETE"})},w={list:async e=>{let t=new URLSearchParams;(null==e?void 0:e.category)&&t.set("category",e.category);let n=t.toString()?"?".concat(t.toString()):"";return g("/api/portfolio".concat(n))},get:async e=>g("/api/portfolio/".concat(e)),create:async e=>g("/api/portfolio",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>g("/api/portfolio/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>g("/api/portfolio/".concat(e),{method:"DELETE"})},b={list:async()=>g("/api/services"),get:async e=>g("/api/services/".concat(e)),create:async e=>g("/api/services",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>g("/api/services/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>g("/api/services/".concat(e),{method:"DELETE"})},k={list:async()=>g("/api/services/inquiries"),get:async e=>g("/api/services/inquiries/".concat(e)),create:async e=>g("/api/services/inquiries",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>g("/api/services/inquiries/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>g("/api/services/inquiries/".concat(e),{method:"DELETE"})},E={send:async e=>g("/api/contact",{method:"POST",body:JSON.stringify(e)})},N={list:async e=>{let t=new URLSearchParams;e&&t.set("search",e);let n=t.toString()?"?".concat(t.toString()):"";return g("/api/users".concat(n))},get:async e=>g("/api/users/".concat(e)),update:async(e,t)=>g("/api/users/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateRole:async(e,t)=>g("/api/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})}),delete:async e=>g("/api/users/".concat(e),{method:"DELETE"}),stats:async()=>g("/api/users/stats/count")}},7440:function(e,t,n){"use strict";n.d(t,{cn:function(){return a},p6:function(){return i}});var r=n(4839),o=n(6164);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.m6)((0,r.W)(t))}function i(e){return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}},3274:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},357:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s=[],l=!1,u=-1;function f(){l&&r&&(l=!1,r.length?s=r.concat(s):u=-1,s.length&&d())}function d(){if(!l){var e=c(f);l=!0;for(var t=s.length;t;){for(r=s,s=[];++u<t;)r&&r[u].run();u=-1,t=s.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new m(e,t)),1!==s.length||l||c(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab="//";var o=r(229);e.exports=o}()}}]);